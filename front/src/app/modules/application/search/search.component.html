<form class="form-horizontal" (ngSubmit)="send(sendForm.form.valid)" #sendForm="ngForm">
  <fieldset>
    <legend >Rechercher <span class="glyphicon glyphicon-chevron-down"></span></legend>

    <div class="form-group">
      <div class="col-sm-5" *ngIf="types">
        <select class="form-control" name="userType" [(ngModel)]="search.userType.id">
          <option *ngFor="let type of types" [value]="type.id">{{ type.name }}</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-5">
        <input type="text" class="form-control" placeholder="Dans la description" name="keyword" [(ngModel)]="search.keyword">
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-5" *ngIf="constants">
        <select class="form-control" [(ngModel)]="country.id" name="country">
          <option [value]="0">Choisissez un pays</option>
          <option *ngFor="let country of constants.countries" [value]="country.id">{{ country.name }}</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-5" *ngIf="constants">
        <select class="form-control" [(ngModel)]="area.id" name="area" [ngSwitch]="country.id">
          <option [value]="0">Choisissez une région</option>
          <ng-container *ngSwitchCase="1">
            <option *ngFor="let area of constants.franceAreas" [value]="area.id">{{ area.name }}</option>
          </ng-container>

          <ng-container *ngSwitchCase="2">
            <option *ngFor="let area of constants.belgiumAreas" [value]="area.id">{{ area.name }}</option>
          </ng-container>

          <ng-container *ngSwitchCase="3">
            <option *ngFor="let area of constants.luxemburgAreas" [value]="area.id">{{ area.name }}</option>
          </ng-container>

          <ng-container *ngSwitchCase="4">
            <option *ngFor="let area of constants.swissAreas" [value]="area.id">{{ area.name }}</option>
          </ng-container>
        </select>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-1">
        <label>Age :</label>
      </div>
      <div class="col-sm-1">
        <input type="text" pattern="[0-9]{2}" class="form-control" placeholder="18" name="ageOne" [(ngModel)]="ageOne">
      </div>
      <div class="col-sm-1">
        <input type="text" pattern="[0-9]{2}" class="form-control" placeholder="99" name="ageTwo" [(ngModel)]="ageTwo">
      </div>
      <div class="col-sm-1">
        <label> ans </label>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-10">
        <button type="submit" class="btn btn-default">Rechercher</button>
      </div>
    </div>
  </fieldset>
</form>

<hr>

<div class="row">
  <div class="col-sm-3" *ngFor="let user of users">
    <a [routerLink]="['/app/profile', user.id ]">
      <img src="{{ uploadImageUrl }}{{ user.images[0].url }}" class="medium-image img-circle center-block">
      <h3 class="text-center text-primary">{{ user.username }}</h3>
      <p class="text-center">Age: {{ user.age }} ans, <strong>{{ user.area.name }}, {{ user.country.name}} <span class="flag-icon flag-icon-{{ user.country.flag }}"></span></strong></p>
      <p class="text-center" *ngIf="search.keyword && searched" [innerHTML]="user.description"></p>
    </a>
  </div>
</div>

<hr>

<div class="row" *ngIf="pager && !pager.last">
  <div class="col-sm-offset-5">
    <a class="btn btn-sm" style="color:black" (click)="scrollDown()">Plus de résultats <span class="glyphicon glyphicon-chevron-down"></span></a>
  </div>
</div>


